<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataTables - Documentación Completa</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css">
    <style>
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #fad961 0%, #f76b1c 100%);
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        .datatables-header {
            background: var(--primary-gradient);
            color: white;
            border: none;
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.3);
        }
        
        .datatables-header .card-header {
            background: transparent;
            border: none;
        }
        
        .section-nav {
            position: sticky;
            top: 20px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .section-nav .nav-link {
            color: #667eea;
            border-radius: 10px;
            margin: 2px 0;
            transition: all 0.3s ease;
        }
        
        .section-nav .nav-link:hover,
        .section-nav .nav-link.active {
            background: var(--primary-gradient);
            color: white;
            transform: translateX(5px);
        }
        
        .code-block {
            background: #2d3748;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            position: relative;
            overflow-x: auto;
        }
        
        .code-block::before {
            content: attr(data-lang);
            position: absolute;
            top: -10px;
            right: 15px;
            background: var(--secondary-gradient);
            color: white;
            padding: 5px 15px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
        }
        
        .highlight-box {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            border-left: 5px solid #e17055;
            border-radius: 0 10px 10px 0;
            padding: 15px;
            margin: 15px 0;
        }
        
        .info-box {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .success-box {
            background: var(--success-gradient);
            color: white;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }
        
        .feature-card {
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: none;
            border-radius: 15px;
            overflow: hidden;
        }
        
        .feature-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 35px rgba(0,0,0,0.1);
        }
        
        .feature-icon {
            width: 60px;
            height: 60px;
            background: var(--primary-gradient);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            font-size: 24px;
        }
        
        .step-number {
            width: 40px;
            height: 40px;
            background: var(--warning-gradient);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- Navegación lateral -->
            <div class="col-lg-3 col-md-4">
                <div class="section-nav">
                    <h5 class="mb-3"><i class="fas fa-table me-2"></i>Contenido</h5>
                    <nav class="nav flex-column">
                        <a class="nav-link active" href="#introduccion">
                            <i class="fas fa-play me-2"></i>Introducción
                        </a>
                        <a class="nav-link" href="#html">
                            <i class="fas fa-code me-2"></i>Estructura HTML
                        </a>
                        <a class="nav-link" href="#javascript">
                            <i class="fab fa-js-square me-2"></i>Configuración JS
                        </a>
                        <a class="nav-link" href="#características">
                            <i class="fas fa-star me-2"></i>Características
                        </a>
                        <a class="nav-link" href="#funcionalidades">
                            <i class="fas fa-cogs me-2"></i>Funcionalidades
                        </a>
                    </nav>
                </div>
            </div>
            
            <!-- Contenido principal -->
            <div class="col-lg-9 col-md-8">
                <div class="main-content">
                    <!-- Cabecera -->
                    <div class="card datatables-header mb-4">
                        <div class="card-header text-center py-4">
                            <h1 class="mb-2"><i class="fas fa-table me-3"></i>DataTables - Documentación Completa</h1>
                            <p class="mb-0">Guía completa para la implementación de tablas dinámicas en el sistema TOLDOS</p>
                        </div>
                    </div>

                    <!-- Introducción -->
                    <section id="introduccion" class="mb-5">
                        <div class="card">
                            <div class="card-header bg-primary text-white">
                                <h3 class="mb-0"><i class="fas fa-info-circle me-2"></i>¿Qué es DataTables?</h3>
                            </div>
                            <div class="card-body">
                                <p class="lead">DataTables es una librería de JavaScript que transforma tablas HTML simples en componentes interactivos con funcionalidades avanzadas como paginación, búsqueda, ordenamiento y filtrado.</p>
                                
                                <div class="info-box">
                                    <h5><i class="fas fa-lightbulb me-2"></i>¿Por qué usar DataTables?</h5>
                                    <ul class="mb-0">
                                        <li>Mejora la experiencia del usuario con datos tabulares</li>
                                        <li>Carga eficiente de grandes volúmenes de información</li>
                                        <li>Integración perfecta con Bootstrap y jQuery</li>
                                        <li>Ampliamente personalizable y extensible</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Estructura HTML -->
                    <section id="html" class="mb-5">
                        <div class="card">
                            <div class="card-header bg-success text-white">
                                <h3 class="mb-0"><i class="fas fa-code me-2"></i>Estructura HTML</h3>
                            </div>
                            <div class="card-body">
                                <p>El fundamento de cualquier DataTable es una tabla HTML bien estructurada. Aquí está el ejemplo del módulo de Roles:</p>
                                
                                <div class="code-block" data-lang="HTML">
                                    <pre><code class="language-html">&lt;!-- Contenedor principal de la tabla --&gt;
&lt;div class="card"&gt;
    &lt;div class="card-header"&gt;
        &lt;h6 class="card-title"&gt;Gestión de Roles&lt;/h6&gt;
    &lt;/div&gt;
    &lt;div class="card-body"&gt;
        &lt;!-- Tabla principal --&gt;
        &lt;table id="tblroles" class="table table-striped table-bordered" style="width:100%"&gt;
            &lt;thead&gt;
                &lt;tr&gt;
                    &lt;th&gt;ID&lt;/th&gt;
                    &lt;th&gt;Nombre del Rol&lt;/th&gt;
                    &lt;th&gt;Estado&lt;/th&gt;
                    &lt;th&gt;Acciones&lt;/th&gt;
                &lt;/tr&gt;
            &lt;/thead&gt;
            &lt;tbody&gt;
                &lt;!-- Los datos se cargan dinámicamente via AJAX --&gt;
            &lt;/tbody&gt;
            &lt;tfoot&gt;
                &lt;tr&gt;
                    &lt;th&gt;ID&lt;/th&gt;
                    &lt;th&gt;Nombre del Rol&lt;/th&gt;
                    &lt;th&gt;Estado&lt;/th&gt;
                    &lt;th&gt;Acciones&lt;/th&gt;
                &lt;/tr&gt;
            &lt;/tfoot&gt;
        &lt;/table&gt;
    &lt;/div&gt;
&lt;/div&gt;</code></pre>
                                </div>

                                <div class="highlight-box">
                                    <h6><i class="fas fa-exclamation-triangle me-2"></i>Puntos Importantes:</h6>
                                    <ul class="mb-0">
                                        <li><strong>ID único:</strong> La tabla debe tener un ID único (tblroles)</li>
                                        <li><strong>Classes Bootstrap:</strong> table, table-striped, table-bordered para el estilo</li>
                                        <li><strong>Estructura completa:</strong> thead, tbody y tfoot son requeridos</li>
                                        <li><strong>Width 100%:</strong> Asegura que la tabla use todo el ancho disponible</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Configuración JavaScript -->
                    <section id="javascript" class="mb-5">
                        <div class="card">
                            <div class="card-header bg-warning text-dark">
                                <h3 class="mb-0"><i class="fab fa-js-square me-2"></i>Configuración JavaScript</h3>
                            </div>
                            <div class="card-body">
                                <div class="alert alert-info">
                                    <h6><i class="fas fa-info-circle me-2"></i>Configuración Principal</h6>
                                    <p class="mb-0">La configuración de DataTables se realiza a través del objeto <code>datatable_rolesConfig</code> que contiene todas las opciones necesarias para el funcionamiento de la tabla.</p>
                                </div>

                                <div class="code-block" data-lang="JavaScript">
                                    <pre><code class="language-javascript">// Configuración principal de DataTables para Roles
var datatable_rolesConfig = {
    // Procesamiento del lado del cliente
    processing: true, // mostrar el procesamiento de la tabla
    
    // Configuración de layout (paginación personalizada)
    layout: {
        bottomEnd: { // elementos de la paginación que aparecerán
            paging: {
                firstLast: true,     // Botones "Primero" y "Último"
                numbers: false,      // Sin números de página
                previousNext: true   // Solo flechas anterior/siguiente
            }
        }
    },
    
    // Configuración de idioma (iconos Bootstrap)
    language: {
        paginate: {
            first: '&lt;i class="bi bi-chevron-double-left"&gt;&lt;/i&gt;',
            last: '&lt;i class="bi bi-chevron-double-right"&gt;&lt;/i&gt;',
            previous: '&lt;i class="bi bi-chevron-compact-left"&gt;&lt;/i&gt;',
            next: '&lt;i class="bi bi-chevron-compact-right"&gt;&lt;/i&gt;'
        }
    },
    
    // Definición de columnas con nombres
    columns: [
        { name: 'control', data: null, defaultContent: '', 
          className: 'details-control sorting_1 text-center' }, // Columna 0: Botón "+"
        { name: 'id_rol', data: 'id_rol', visible: false, 
          className: "text-center" }, // Columna 1: ID_ROL (oculta)
        { name: 'nombre_rol', data: 'nombre_rol', 
          className: "text-center" }, // Columna 2: NOMBRE_ROL
        { name: 'est', data: 'est', 
          className: "text-center" }, // Columna 3: ESTADO
        { name: 'activar', data: null, 
          className: "text-center" }, // Columna 4: ACTIVAR/DESACTIVAR
        { name: 'editar', data: null, defaultContent: '', 
          className: "text-center" }  // Columna 5: EDITAR
    ],
    
    // Definiciones personalizadas de columnas
    columnDefs: [
        // Columna 0: BOTÓN MÁS (detalles expandibles)
        { targets: "control:name", width: '5%', searchable: false, 
          orderable: false, className: "text-center"},
          
        // Columna 1: ID ROL (oculta)
        { targets: "id_rol:name", width: '5%', searchable: false, 
          orderable: false, className: "text-center" },
          
        // Columna 2: NOMBRE ROL
        { targets: "nombre_rol:name", width: '20%', searchable: true, 
          orderable: true, className: "text-center" },
          
        // Columna 3: ESTADO (con iconos)
        {
            targets: "est:name", width: '10%', orderable: true, 
            searchable: true, className: "text-center",
            render: function (data, type, row) {
                if (type === "display") {
                    return row.est == 1 ? 
                        '&lt;i class="bi bi-check-circle text-success fa-2x"&gt;&lt;/i&gt;' : 
                        '&lt;i class="bi bi-x-circle text-danger fa-2x"&gt;&lt;/i&gt;';
                }
                return row.est;
            }
        },
        
        // Columna 4: BOTÓN ACTIVAR/DESACTIVAR
        {   
            targets: "activar:name", width: '15%', searchable: false, 
            orderable: false, class: "text-center",
            render: function (data, type, row) {
                if (row.est == 1) {
                    // Botón para desactivar
                    return `&lt;button type="button" class="btn btn-danger btn-sm desacRol" 
                            data-bs-toggle="tooltip-primary" data-placement="top" 
                            title="Desactivar" data-id_rol="${row.id_rol}"&gt; 
                            &lt;i class="fa-solid fa-trash"&gt;&lt;/i&gt;
                            &lt;/button&gt;`;
                } else {
                    // Botón para activar
                    return `&lt;button class="btn btn-success btn-sm activarRol" 
                            data-bs-toggle="tooltip-primary" data-placement="top" 
                            title="Activar" data-id_rol="${row.id_rol}"&gt;
                            &lt;i class="bi bi-hand-thumbs-up-fill"&gt;&lt;/i&gt;
                            &lt;/button&gt;`;
                }
            }
        },
        
        // Columna 5: BOTÓN EDITAR
        {   
            targets: "editar:name", width: '15%', searchable: false, 
            orderable: false, class: "text-center",
            render: function (data, type, row) {
                return `&lt;button type="button" class="btn btn-info btn-sm editarRol" 
                        data-toggle="tooltip-primary" data-placement="top" 
                        title="Editar" data-id_rol="${row.id_rol}"&gt;
                        &lt;i class="fa-solid fa-edit"&gt;&lt;/i&gt;
                        &lt;/button&gt;`;
            }
        }
    ],
    
    // Configuración AJAX
    ajax: {
        url: '../../controller/roles.php?op=listar',
        type: 'GET',
        dataSrc: function (json) {
            console.log("JSON recibido:", json);
            return json.data || json; // Ajuste según estructura recibida
        }
    }
};

// Inicialización de la tabla
$(document).ready(function() {
    var table_e = $('#roles_data').DataTable(datatable_rolesConfig);
});</code></pre>
                                </div>

                                <div class="success-box">
                                    <h6><i class="fas fa-cogs me-2"></i>Explicación de la Configuración</h6>
                                    <div class="row">
                                        <div class="col-md-6">
                                            <h6>Layout y Paginación:</h6>
                                            <ul class="small">
                                                <li><strong>layout.bottomEnd:</strong> Control de elementos de paginación</li>
                                                <li><strong>firstLast:</strong> Botones "Primero" y "Último"</li>
                                                <li><strong>numbers:</strong> false = sin números de página</li>
                                                <li><strong>previousNext:</strong> Solo flechas de navegación</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <h6>Columnas con Nombres:</h6>
                                            <ul class="small">
                                                <li><strong>name:</strong> Identificador único de columna</li>
                                                <li><strong>targets:</strong> "nombre:name" para referenciar</li>
                                                <li><strong>visible:</strong> false para ocultar columnas</li>
                                                <li><strong>className:</strong> Clases CSS aplicadas</li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="row mt-3">
                                        <div class="col-md-6">
                                            <h6>Funciones Render:</h6>
                                            <ul class="small">
                                                <li><strong>Condicional:</strong> if (row.est == 1)</li>
                                                <li><strong>Template strings:</strong> Uso de backticks (`)</li>
                                                <li><strong>data-attributes:</strong> data-id_rol para eventos</li>
                                                <li><strong>Bootstrap Icons:</strong> bi bi-check-circle</li>
                                            </ul>
                                        </div>
                                        <div class="col-md-6">
                                            <h6>AJAX y Datos:</h6>
                                            <ul class="small">
                                                <li><strong>dataSrc:</strong> Función para procesar respuesta</li>
                                                <li><strong>console.log:</strong> Debug de datos recibidos</li>
                                                <li><strong>json.data || json:</strong> Fallback de estructura</li>
                                                <li><strong>GET method:</strong> Obtener datos del servidor</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>

                                <div class="alert alert-warning">
                                    <h6><i class="fas fa-lightbulb me-2"></i>Sistema Completo Activar/Desactivar Roles</h6>
                                    <p>El sistema completo incluye la renderización dinámica de botones y las funciones de control:</p>

                                    <h6 class="mt-3"><i class="fas fa-cog me-2"></i>1. Renderización de Botones</h6>
                                    <div class="code-block" data-lang="JavaScript">
                                        <pre><code class="language-javascript">// Columna 4: BOTÓN ACTIVAR/DESACTIVAR
{   
    targets: "activar:name", width: '15%', searchable: false, 
    orderable: false, class: "text-center",
    render: function (data, type, row) {
        if (row.est == 1) {
            // Rol activo - mostrar botón DESACTIVAR
            return `&lt;button type="button" class="btn btn-danger btn-sm desacRol" 
                    data-bs-toggle="tooltip-primary" data-placement="top" 
                    title="Desactivar" data-original-title="Tooltip on top" 
                    data-id_rol="${row.id_rol}"&gt; 
                    &lt;i class="fa-solid fa-trash"&gt;&lt;/i&gt;
                    &lt;/button&gt;`;
        } else {
            // Rol inactivo - mostrar botón ACTIVAR
            return `&lt;button class="btn btn-success btn-sm activarRol" 
                    data-bs-toggle="tooltip-primary" data-placement="top" 
                    title="Activar" data-original-title="Tooltip on top" 
                    data-id_rol="${row.id_rol}"&gt;
                    &lt;i class="bi bi-hand-thumbs-up-fill"&gt;&lt;/i&gt;
                    &lt;/button&gt;`;
        }
    }
}</code></pre>
                                    </div>

                                    <h6 class="mt-3"><i class="fas fa-trash me-2"></i>2. Función Desactivar Rol</h6>
                                    <div class="code-block" data-lang="JavaScript">
                                        <pre><code class="language-javascript">// Función para desactivar un rol
function desacRol(id) {
    swal.fire({
        title: 'Desactivar',
        text: `¿Desea desactivar el rol con ID ${id}?`,
        icon: 'question',
        showCancelButton: true,
        confirmButtonText: 'Si',
        cancelButtonText: 'No',
        reverseButtons: true
    }).then((result) => {
        if (result.isConfirmed) {
            $.post("../../controller/roles.php?op=eliminar", 
                   { id_rol: id }, 
                   function (data) {
                // Recargar la tabla
                $table.DataTable().ajax.reload();
                
                // Mostrar mensaje de éxito
                swal.fire(
                    'Desactivado',
                    'El rol ha sido desactivado',
                    'success'
                )
            });
        }
    })
}

// Event listener para capturar click en botón desactivar
$(document).on('click', '.desacRol', function (event) {
    event.preventDefault();
    let id = $(this).data('id_rol');
    desacRol(id);
});</code></pre>
                                    </div>

                                    <h6 class="mt-3"><i class="fas fa-thumbs-up me-2"></i>3. Función Activar Rol</h6>
                                    <div class="code-block" data-lang="JavaScript">
                                        <pre><code class="language-javascript">// Función para activar un rol
function activarRol(id) {
    swal.fire({
        title: 'Activar',
        text: `¿Desea activar el rol con ID ${id}?`,
        icon: 'question',
        showCancelButton: true,
        confirmButtonText: 'Si',
        cancelButtonText: 'No',
        reverseButtons: true
    }).then((result) => {
        if (result.isConfirmed) {
            $.post("../../controller/roles.php?op=activar", 
                   { id_rol: id }, 
                   function (data) {
                // Recargar la tabla
                $table.DataTable().ajax.reload();
                
                // Mostrar mensaje de éxito
                swal.fire(
                    'Activado',
                    'El rol ha sido activado',
                    'success'
                )
            });
        }
    })
}

// Event listener para capturar click en botón activar
$(document).on('click', '.activarRol', function (event) {
    event.preventDefault();
    let id = $(this).data('id_rol');
    console.log("id rol:", id);
    
    activarRol(id);
});</code></pre>
                                    </div>

                                    <div class="alert alert-info mt-3">
                                        <h6><i class="fas fa-info-circle me-2"></i>Flujo del Sistema:</h6>
                                        <ol class="mb-0">
                                            <li><strong>Renderización:</strong> DataTables evalúa <code>row.est</code> para mostrar el botón correcto</li>
                                            <li><strong>Click Event:</strong> jQuery captura el click usando event delegation <code>$(document).on('click', '.clase')</code></li>
                                            <li><strong>Confirmación:</strong> SweetAlert2 muestra modal de confirmación al usuario</li>
                                            <li><strong>AJAX Request:</strong> Si confirma, se envía petición POST al controlador PHP</li>
                                            <li><strong>Actualización:</strong> <code>$table.DataTable().ajax.reload()</code> recarga los datos</li>
                                            <li><strong>Feedback:</strong> SweetAlert2 muestra mensaje de éxito al usuario</li>
                                        </ol>
                                    </div>

                                    <div class="success-box mt-3">
                                        <h6><i class="fas fa-key me-2"></i>Puntos Clave de la Implementación:</h6>
                                        <ul class="mb-0">
                                            <li><strong>Event Delegation:</strong> <code>$(document).on('click', '.clase')</code> para elementos dinámicos</li>
                                            <li><strong>Data Attributes:</strong> <code>data-id_rol="${row.id_rol}"</code> para pasar datos</li>
                                            <li><strong>SweetAlert2:</strong> Confirmaciones elegantes y profesionales</li>
                                            <li><strong>AJAX Reload:</strong> Actualización automática sin refrescar página</li>
                                            <li><strong>Template Strings:</strong> Uso de backticks (`) para HTML multilinea</li>
                                            <li><strong>Endpoints diferentes:</strong> <code>op=eliminar</code> vs <code>op=activar</code></li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="alert alert-info">
                                    <h6><i class="fas fa-expand me-2"></i>Funcionalidad de Detalles Expandibles</h6>
                                    <p>La primera columna (control) permite expandir filas para mostrar más información:</p>
                                    <div class="code-block" data-lang="JavaScript">
                                        <pre><code class="language-javascript">// Columna de control para expandir detalles
{ name: 'control', data: null, defaultContent: '', 
  className: 'details-control sorting_1 text-center' }

// Event listener para el click en el botón "+"
$tableBody.on('click', 'td.details-control', function () {
    var tr = $(this).closest('tr');
    var row = table_e.row(tr);
    
    if (row.child.isShown()) {
        row.child.hide();      // Ocultar detalles
        tr.removeClass('shown');
    } else {
        row.child(format(row.data())).show(); // Mostrar detalles
        tr.addClass('shown');
    }
});</code></pre>
                                    </div>
                                    <ul class="mb-0">
                                        <li><strong>details-control:</strong> Clase CSS que identifica la columna expandible</li>
                                        <li><strong>row.child():</strong> Método DataTables para filas hijo</li>
                                        <li><strong>format():</strong> Función personalizada que genera el HTML de detalles</li>
                                        <li><strong>shown class:</strong> Indica visualmente que la fila está expandida</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Características -->
                    <section id="características" class="mb-5">
                        <div class="card">
                            <div class="card-header bg-info text-white">
                                <h3 class="mb-0"><i class="fas fa-star me-2"></i>Características de la Implementación</h3>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6">
                                        <h6><i class="fas fa-check-circle text-success me-2"></i>Funcionalidades Implementadas</h6>
                                        <div class="list-group list-group-flush">
                                            <div class="list-group-item d-flex align-items-center">
                                                <i class="fas fa-expand text-primary me-3"></i>
                                                <div>
                                                    <strong>Detalles Expandibles</strong><br>
                                                    <small class="text-muted">Botón "+" para mostrar información completa</small>
                                                </div>
                                            </div>
                                            <div class="list-group-item d-flex align-items-center">
                                                <i class="fas fa-toggle-on text-info me-3"></i>
                                                <div>
                                                    <strong>Activar/Desactivar</strong><br>
                                                    <small class="text-muted">Cambio dinámico de estado de roles</small>
                                                </div>
                                            </div>
                                            <div class="list-group-item d-flex align-items-center">
                                                <i class="fas fa-edit text-success me-3"></i>
                                                <div>
                                                    <strong>Edición Modal</strong><br>
                                                    <small class="text-muted">Modificación de roles via modal</small>
                                                </div>
                                            </div>
                                            <div class="list-group-item d-flex align-items-center">
                                                <i class="fas fa-filter text-warning me-3"></i>
                                                <div>
                                                    <strong>Filtros por Estado</strong><br>
                                                    <small class="text-muted">Radio buttons para filtrar por estado</small>
                                                </div>
                                            </div>
                                            <div class="list-group-item d-flex align-items-center">
                                                <i class="fas fa-search text-danger me-3"></i>
                                                <div>
                                                    <strong>Búsqueda por Columnas</strong><br>
                                                    <small class="text-muted">Filtros individuales en footer</small>
                                                </div>
                                            </div>
                                            <div class="list-group-item d-flex align-items-center">
                                                <i class="fas fa-arrows-alt text-secondary me-3"></i>
                                                <div>
                                                    <strong>Paginación Personalizada</strong><br>
                                                    <small class="text-muted">Solo flechas, sin números de página</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <h6><i class="fas fa-tools text-info me-2"></i>Tecnologías</h6>
                                        <div class="row g-2">
                                            <div class="col-6">
                                                <div class="text-center p-3 bg-light rounded">
                                                    <i class="fas fa-table text-primary fa-2x mb-2"></i>
                                                    <h6>DataTables</h6>
                                                    <small class="text-muted">Librería principal</small>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="text-center p-3 bg-light rounded">
                                                    <i class="fab fa-js-square text-warning fa-2x mb-2"></i>
                                                    <h6>jQuery</h6>
                                                    <small class="text-muted">DOM manipulation</small>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="text-center p-3 bg-light rounded">
                                                    <i class="fab fa-bootstrap text-purple fa-2x mb-2"></i>
                                                    <h6>Bootstrap</h6>
                                                    <small class="text-muted">CSS Framework</small>
                                                </div>
                                            </div>
                                            <div class="col-6">
                                                <div class="text-center p-3 bg-light rounded">
                                                    <i class="fas fa-server text-danger fa-2x mb-2"></i>
                                                    <h6>AJAX</h6>
                                                    <small class="text-muted">Data loading</small>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Funcionalidades Avanzadas -->
                    <section id="funcionalidades" class="mb-5">
                        <div class="card">
                            <div class="card-header bg-dark text-white">
                                <h3 class="mb-0"><i class="fas fa-cogs me-2"></i>Funcionalidades Avanzadas</h3>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-12">
                                        <h5><i class="fas fa-magic me-2"></i>Detalles Expandibles (Función format)</h5>
                                        <p>Cada fila puede expandirse para mostrar información completa del rol:</p>
                                        <div class="code-block" data-lang="JavaScript">
                                            <pre><code class="language-javascript">function format(d) {
    return `
        &lt;div class="card border-primary mb-3"&gt;
            &lt;div class="card-header bg-primary text-white"&gt;
                &lt;div class="d-flex align-items-center"&gt;
                    &lt;i class="bi bi-gear-fill fs-3 me-2"&gt;&lt;/i&gt;
                    &lt;h5 class="card-title mb-0"&gt;Detalles del Rol&lt;/h5&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            &lt;div class="card-body p-0"&gt;
                &lt;table class="table table-borderless table-striped"&gt;
                    &lt;tbody&gt;
                        &lt;tr&gt;
                            &lt;th&gt;&lt;i class="bi bi-hash me-2"&gt;&lt;/i&gt;Id Rol&lt;/th&gt;
                            &lt;td&gt;${d.id_rol || 'No disponible'}&lt;/td&gt;
                        &lt;/tr&gt;
                        &lt;tr&gt;
                            &lt;th&gt;&lt;i class="bi bi-person-badge me-2"&gt;&lt;/i&gt;Nombre Rol&lt;/th&gt;
                            &lt;td&gt;${d.nombre_rol || 'No disponible'}&lt;/td&gt;
                        &lt;/tr&gt;
                    &lt;/tbody&gt;
                &lt;/table&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    `;
}</code></pre>
                                        </div>
                                    </div>
                                </div>

                                <div class="row mt-4">
                                    <div class="col-md-6">
                                        <h5><i class="fas fa-filter me-2"></i>Filtros por Estado</h5>
                                        <p>Sistema de filtrado con radio buttons:</p>
                                        <div class="code-block" data-lang="JavaScript">
                                            <pre><code class="language-javascript">// Filtro por estado con radio buttons
$('input[name="filterStatus"]').on('change', function () {
    var value = $(this).val();
    
    if (value === "all") {
        table_e.column(3).search("").draw();
    } else {
        table_e.column(3).search(value).draw();
    }
});</code></pre>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6">
                                        <h5><i class="fas fa-broom me-2"></i>Limpieza de Filtros</h5>
                                        <p>Botón para resetear todos los filtros:</p>
                                        <div class="code-block" data-lang="JavaScript">
                                            <pre><code class="language-javascript">// Limpiar todos los filtros
$('#clear-filter').on('click', function () {
    table_e.destroy();  // Destruir tabla
    
    // Limpiar inputs del footer
    $columnFilterInputs.each(function () {
        $(this).val('');
    });
    
    // Recrear tabla
    table_e = $table.DataTable($tableConfig);
    $('#filter-alert').hide();
});</code></pre>
                                        </div>
                                    </div>
                                </div>

                                <div class="row mt-4">
                                    <div class="col-md-12">
                                        <h5><i class="fas fa-exclamation-triangle me-2"></i>Validación y Confirmaciones</h5>
                                        <p>Sistema de confirmaciones con SweetAlert2 para acciones críticas:</p>
                                        <div class="code-block" data-lang="JavaScript">
                                            <pre><code class="language-javascript">// Confirmación para desactivar rol
function desacRol(id) {
    swal.fire({
        title: 'Desactivar',
        text: `¿Desea desactivar el rol con ID ${id}?`,
        icon: 'question',
        showCancelButton: true,
        confirmButtonText: 'Si',
        cancelButtonText: 'No',
        reverseButtons: true
    }).then((result) => {
        if (result.isConfirmed) {
            $.post("../../controller/roles.php?op=eliminar", 
                   { id_rol: id }, 
                   function (data) {
                $table.DataTable().ajax.reload();
                swal.fire('Desactivado', 'El rol ha sido desactivado', 'success')
            });
        }
    })
}</code></pre>
                                        </div>
                                        
                                        <div class="alert alert-info mt-3">
                                            <h6><i class="fas fa-info-circle me-2"></i>Características del Sistema de Validación:</h6>
                                            <ul class="mb-0">
                                                <li><strong>FormValidator:</strong> Validación del lado cliente</li>
                                                <li><strong>verificarRolExistente():</strong> Prevención de duplicados</li>
                                                <li><strong>SweetAlert2:</strong> Confirmaciones elegantes</li>
                                                <li><strong>Toastr:</strong> Notificaciones de estado</li>
                                                <li><strong>AJAX reload:</strong> Actualización automática de tabla</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>

                    <!-- Footer -->
                    <div class="card bg-dark text-white text-center">
                        <div class="card-body">
                            <h5><i class="fas fa-graduation-cap me-2"></i>Documentación DataTables</h5>
                            <p class="mb-0">Sistema TOLDOS - Documentación para desarrolladores</p>
                            <small class="text-muted">Actualizado: <?php echo date('d/m/Y H:i:s'); ?></small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
    
    <script>
        // Navegación suave entre secciones
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remover clase active de todos los enlaces
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                
                // Agregar clase active al enlace clickeado
                this.classList.add('active');
                
                // Navegar suavemente a la sección
                const targetId = this.getAttribute('href').substring(1);
                const targetElement = document.getElementById(targetId);
                
                if (targetElement) {
                    targetElement.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Resaltar código con Prism
        Prism.highlightAll();
    </script>
</body>
</html>